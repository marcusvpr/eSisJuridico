<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

	<p:panelGrid id="pg1" columns="4" layout="grid" style="border:0px !important; background:none;"
													styleClass="ui-panelgrid-blank">
													        
        <p:outputLabel value="Vendedor" for="mpVendedor"/>
        <p:selectOneMenu id="mpVendedor" value="#{mpCadastroPedidoBean.mpPedido.mpVendedor}"
        		disabled="#{mpCadastroPedidoBean.indEditavel}">
            <f:selectItem itemLabel="Selecione o Vendedor" />
            <f:selectItems value="#{mpCadastroPedidoBean.mpVendedores}" var="mpVendedor"
            	itemValue="#{mpVendedor}" itemLabel="#{mpVendedor.mpPessoa.nome}" />
        </p:selectOneMenu>
        
        <p:outputLabel value="Contato" for="mpContato"/>
        <h:panelGroup>
	        <p:inputText id="mpContato" value="#{mpCadastroPedidoBean.nomeMpContato}" 
	        	readonly="#{facesContext.currentPhaseId.name eq 'RENDER_RESPONSE'}" />
	        	
	        <p:commandButton icon="ui-icon-search" title="Pesquisar" process="@this"
	        	update="@none" disabled="#{mpCadastroPedidoBean.indEditavel}"
	        	action="#{mpSelecaoContatoBean.abrirDialogo}" ignoreAutoUpdate="true">
	        	<p:ajax event="dialogReturn" listener="#{mpCadastroPedidoBean.mpContatoSelecionado}"
	        		update="mpContato" ignoreAutoUpdate="true" />
	        </p:commandButton>
        </h:panelGroup>
        
        <p:outputLabel value="Forma Pagamento" for="mpFormaPagamento"/>
        <p:selectOneMenu id="mpFormaPagamento" 
        							value="#{mpCadastroPedidoBean.mpPedido.mpFormaPagamento}"
        							disabled="#{mpCadastroPedidoBean.indEditavel}">
            <f:selectItem itemLabel="Selecione Forma Pagamento" />
            <f:selectItems value="#{mpCadastroPedidoBean.mpFormasPagamento}" var="mpFormaPagamento"
            	itemValue="#{mpFormaPagamento}" itemLabel="#{mpFormaPagamento.descricao}" />
        </p:selectOneMenu>
        
        <p:outputLabel value="Valor Frete" for="valorFrete"/>
        <p:inputText id="valorFrete" maxlength="10" styleClass="moeda" 
        		value="#{mpCadastroPedidoBean.mpPedido.valorFrete}" 
        		readonly="#{mpCadastroPedidoBean.indEditavel}">
        	<f:convertNumber maxFractionDigits="2" minFractionDigits="2" />
        	
        	<p:ajax event="change" process="@this" update="frmCadastro:tabViewP:totalPedido"
        		listener="#{mpCadastroPedidoBean.recalcularMpPedido}" />
        </p:inputText>
        
	</p:panelGrid>
	
	<p:panelGrid id="pg2" columns="7" layout="grid" style="border:0px !important; background:none;"
													styleClass="ui-panelgrid-blank">

       	<p:spacer width="150" height="5" />
        
        <p:outputLabel value="Subtotal" style="font-weight: bold"/>
        <h:outputText value="#{mpCadastroPedidoBean.mpPedido.valorSubtotal}" 
        									style="font-weight:bold" id="subtotal">
        	<f:convertNumber type="currency"/>
        </h:outputText>
        
        <p:outputLabel value="Valor de desconto" for="valorDesconto"/>
        <p:inputText id="valorDesconto" size="10" maxlength="10" styleClass="moeda" 
        				value="#{mpCadastroPedidoBean.mpPedido.valorDesconto}"
        			 	readonly="#{mpCadastroPedidoBean.indEditavel}">
        	<f:convertNumber maxFractionDigits="2" minFractionDigits="2" />
        	
        	<p:ajax event="change" process="@this" update="frmCadastro:tabViewP:totalPedido"
        		listener="#{mpCadastroPedidoBean.recalcularMpPedido}" />
        </p:inputText>
        
        <p:outputLabel value="Total do pedido" style="font-weight: bold; font-size:1.1em"/>
        <h:outputText value="#{mpCadastroPedidoBean.mpPedido.valorTotal}" 
        							style="font-weight: bold; font-size:1.1em" id="totalPedido">
        	<f:convertNumber type="currency" />
        </h:outputText>

	</p:panelGrid>
  	
</ui:composition>